# リソースへのアクセス権の付与、変更、取り消し

### Cloud IAM
誰（ID）がどのリソースに対してどのようなアクセス権（ロール）を持つかを定義することにより、アクセス制御を管理する。  
Cloud IAMは直接エンドユーザーに権限を付与はせず、ロールを介してメンバーに付与される。  

### Cloud IAMのアクセス管理モデル
![Cloud IAMの仕組み](./1_1_grant_iam_to_user/iam-overview-basics.svg)

##### Cloud IAMの構成
- メンバー  
リソースへのアクセスが許可されている以下のアカウント
  - Googleアカウント  
    個人レベルで所有するアカウント
  - サービスアカウント  
    アプリケーションのアカウント。各GCPリソースもサービスアカウントを使用して他のGCPリソースにアクセスする
  - Googleグループ  
    Googleアカウントとサービスアカウントの名前付きコレクション
  - G Suiteドメイン  
    組織のG Suiteアカウントで作成されたすべてのGoogleアカウントの仮想グループ
  - Cloud Identityドメイン
    1つの組織のGoogleアカウントの仮想グループを示す。（G Suiteドメインと類似しているが、G Suiteの機能にアクセスはできない）


- ロール  
ロールは権限のコレクション。権限によってリソースへの許可されているオペレーションが決まる
  - 基本の役割  
  GCPで初期定義されているロール。オーナー、編集者、閲覧者がある。（強い権限のため、割り当てには注意が必要）
  - 事前定義の役割  
  GCPで初期定義されているが、基本の役割よりも詳細に設定されているロール。
  - カスタム役割  
  ユーザーが定義するロール

- ポリシー
1つ以上のメンバーを1つの役割にバインドする。

#### 特殊な識別子
- allAuthenticatedUsers  
全てのサービスアカウント及び認証されたGoogleアカウントに対してアクセスを許可する

- allUsers  
  認証されていないユーザーも含め、全てのユーザーに対してアクセスを許可する


### Cloud IAMの付与
Cloud IAMは以下の3通りの方法で付与、剥奪、削除ができる
- GCPコンソール
- gcloudコマンド
- REST API
- クライアントライブラリ
